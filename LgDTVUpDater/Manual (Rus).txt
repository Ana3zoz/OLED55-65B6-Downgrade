Инструкция по реализации на ПК подмены локального сервера вместо сервера обновления ПО LG для отката и установки нужной версии, в зависимости от выбранного файла с ответом на моделях ТВ LG.

Общее для Online (с доступом по сети интернет) и Local (локального) методов отката:
--------------------------------------------------------------------------------------

1. Распаковываем папку из основного архива в корень диска "C:\" на ПК, должна быть папка в корне диска "C:\" - "LgDTVUpDater", и в ней этот текстовый файл с подробной инструкцией.
Если уже ранее загружали другой подобный архив и настраивали работу программы отката, то обязательно удаляем с установленного комплекта только прежнюю папку "zagotovki", и копируем из нового архива вместо этой папки новую папку "zagotovki" с обновленными данными файлов ответов.

2. В конце файла "C:\LgDTVUpDater\dns\AcrylicHosts.txt" меняем вручную эти адреса "192.168.0.11" на свой, именно локальный IP-адрес компьютера, на котором всё это запускается. Имена серверов snu.lge.com, lgtvonline.lge.com и su.lge.com не трогаем. Если используем локальный метод отката с ПК, то спереди последних двух строк с адресами lgtvonline.lge.com и su.lge.com убираем это #.
IP адрес ПК смотреть тут: Панель управления - Центр управления сетями и общим доступом - через Изменение параметров адаптера выбрать свое соединение и правой кнопкой мыши выбрав Состояние и в пункте "Сведения" найти строку "Адрес IPv4". Или нажать на клавиатуре сочетание клавиш Win+R, и в открывшемся окошке ввести «cmd» (без кавычек) и нажать клавишу Enter. В запущенной Командной строке ввести: «ipconfig» (без кавычек) и нажать клавишу Enter. Далее найти строку IPv4-адрес своего компьютера, состоящий из набора цифр в формате xxx.xxx.xxx.xxx (например, 192.168.1.2). Это и есть наш локальный IP адрес ПК.

Примечание: Вместо всего этого начала 2-го пункта, можно сразу запустить файл start.bat из корня папки "C:\LgDTVUpDater\", и выполнить все предложенные там действия по вводу IP адреса и выбора метода отката в режиме диалога. Можно и испробовать другой альтернативный вариант DNS-сервера DualServer, подтвердив его запуск через start_new.bat и выполнив подобные действия, что и при start.bat.  Если уже ранее запускались эти bat файлы, и нет необходимости в замене IP адреса ПК в файле и выбора метода отката, то можно в начале диалога пропустить все действия, тогда будут сразу запущены два приложения для отката с прежними данными.При запуске через эти файлы start.bat или start_new.bat дальнейшие пункты 4 и 5 пропускаем, оба приложения (web-сервер и DNS-сервер) будут автоматически запущены. При использовании альтернативного DNS сервера DualServer через запуск start_new.bat, необходимо на ПК все сетевые настройки на адаптере (IP адрес, маска, шлюз и DNS адреса) обязательно перед выполнением выставить вручную. Это условие на ПК желательно и для других способов использования отката.

3.Теперь самое важное.
Если запуск выполнялся вручную, то заходим в соответствующую папку (zagotovki\online или zagotovki\local), согласно выбранного метода отката. Если запускали через start.bat, или для альтернативного DNS-сервера через start_new.bat из корня папки "C:\LgDTVUpDater\", то заходим в любую папку "C:\LgDTVUpDater\zagotovki\online\" или "C:\LgDTVUpDater\zagotovki\local\" при настройках для локального метода отката, а при настройках для онлайн метода отката заходим только в папку "C:\LgDTVUpDater\zagotovki\online\".

Модели ТВ - "имя файла ответа".

Модели ТВ 2012 года (Netcast 3.0) -
Папка LM620-LM761 - HE_DTV_GP4I_AFAAABAA
Папка LM860-LM960 - HE_DTV_GP4H_AFAAABAA

Модели ТВ 2013 года (Netcast 4.0) -
Папка LA620-LA741, LN570-LN578, LN613, LN655 - HE_DTV_NC4M_AFAAABAA
Папка LA790-LA868 - HE_DTV_NC4H_AFAAABAA
Папка LA965-LA970 - HE_LCD_NC4H_AAADABAA

Модели ТВ 2014 года -
Папка LB491-LB498, LB570-LB588, LB610 (Netcast 4.5) - HE_LCD_NC5M_AAAAABAA
Папка UB800-UB836 (Netcast 4.5) - HE_LCD_NC5U_AAADABAA
Папка LB630-LB870, EC930 (webOS 1) - HE_DTV_WT1M_AFAAABAA
Папка UB850-UB980, UC970 (webOs 1) - HE_DTV_WT1H_AFAAABAA

Модели ТВ 2015 года - 
Папка LF491-LF498, LF580 (Netcast 4.5) - HE_LCD_NC5C_AAAAABAA
Папка LF590-LF592, MT57S (webOS 2 Lite) - HE_DTV_W15L_AFAAABAA
Папка LF630-LF653, EG910 (webOS 2) - HE_DTV_W15M_AFAAABAA
Папка UF640 (webOS 2 Lite) - HE_DTV_W15B_AFADABAA
Папка UF630, UF680, UF770-UF778, EC950, EG920 (webOS 2) - HE_DTV_W15A_AFADABAA
Папка UF690, UF850-UF940, UG870, EG960 (webOS 2) - HE_DTV_W15U_AFADABAA
Папка UF950, EF980 (webOS 2) - HE_DTV_W15H_AFADABAA

Модели ТВ 2016 года - 
Папка LH480U, LH560, MT48S (webOS 2 Lite) - HE_DTV_W15L_AFAAABAA
Папка LH590-LH595, LH604-LH609, LH615, LH630 (webOS 3) - HE_DTV_W16R_AFAAABAA
Папка UH600 (webOS 2) - HE_DTV_W15A_AFADABAA
Папка UH603-UH605, UH610-UH619, UH620 (webOS 3) - HE_DTV_W16P_AFADABAA
Папка UH630, UH651-UH656, UH661, UH671-UH676, UH750-UH755 (webOS 3) - HE_DTV_W16N_AFADABAA
Папка UH700, UH770, OLED B6 (webOS 3) - HE_DTV_W16K_AFADABAA
Папка UH780, UH850-UH855, UH950-UH955, OLED C6, E6 (webOS 3) - HE_DTV_W16M_AFADABAA
Папка OLED G6 (webOS 3) - HE_DTV_W16H_AFADABAA

Модели ТВ 2017 года - 
Папка LJ550-LJ555, LJ594-LJ595, LJ600, L610-LJ615, LJ622-LJ625, MT49S (webOS 3.5) - HE_DTV_W17R_AFAAABAA
Папка UJ630-UJ635, UJ650-UJ655, UJ670-UJ675, UJ701 (webOS 3.5) - HE_DTV_W17P_AFADABAA
Папка UJ740, UJ750-UJ752, SJ800, SJ810, SJ850, SJ930, SJ950-SJ957, OLED B7, C7, E7, G7, W7 - (webOS 3.5) - HE_DTV_W17H_AFADABAA

Открываем папку с моделью вашего ТВ, там будут другие папки с номерами версий. Это и есть папки с файлами ответов на разные версии ранних и текущих прошивок. В названии папки указана версия ПО с кодами стран на которую будет производиться откат. Если в названии на конце присутствует знак "_", то это означает, что эта версия была тестовая на дату создания архива.

Выбираем файл ответа на нужную вам версию ПО для отката, берём выбранный файл из соответствующей папки и копируем его в папку "C:\LgDTVUpDater\htdocs\", при этом соглашаемся на замену исходного файла, если вдруг он уже там ранее присутствовал.

Примечание: При локальном методе отката дополнительно копируем в папку "C:\LgDTVUpDater\htdocs\" соответствующий файл ПО, предварительно скачав его по ссылке из соответствующих тем форума. Размер и название самого файла ПО точно должны соответствовать тем, что указаны внутри содержимого файла ответа. При этом обращаем внимание на окончание файла ПО скачанного Вами. Если в конце файла ПО перед расширением ".epk" после SECURED есть подобные знаки типа этого "%5B0%5D", то это обязательно надо поправить на соответствующее [0] или подобное ([1], [2], [3]), именно как прописано внутри содержимого файла ответа. При этом загрузка файла ПО на ТВ пойдет уже с вашего ПК, а не с сети с сервера обновления.

4. Запускаем "startDNS.bat" из папки "C:\LgDTVUpDater\" для загрузки DNS-сервера и не закрываем окно командной строки (можно только свернуть). В этом окне будет несколько строк, далее они в процессе обновления будут добавляться.

5. Запускаем "startHTTP.bat" из папки "C:\LgDTVUpDater\" для загрузки web-сервера и тоже не закрываем это окно (можно только свернуть), должна быть в окне только одна короткая строка.

Примечание: Если изначально выполнялся запуск через start.bat или для альтернативного DNS-сервера через start_new.bat из корня папки "C:\LgDTVUpDater\", то выпонение 4 и 5 пунктов не требуется, оба окна приложений уже будут запущены автоматически.  

Компьютер настроен на локальный сервер и готов к работе. Если по какой-то причине не запустилось окно или выдало ошибку, то проверьте в системе что блокирует это, обычно это бывает из запущенного на ПК Skype и его процессов. Решение проблемы по освобождению занятого системой 80 порта есть в изменении реестра по Выполнить->regedit. В ветке HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\HTTP создаем параметр типа Dword c именем «NoRun» и присваиваем ему значение «1» без кавычек, или ищем параметр «Start» и меняем значение на «0» без кавычек, естественно с последующей перезагрузкой ПК. На самом ПК желательно отключить это гашение экрана на время отката ПО при работе программ, онлайн обновление может из-за нестабильного интернета продолжаться дольше по времени при загрузке по сети на ТВ этого файла обновления.

6. В телевизоре, который должен находится в одной локальной сети с ПК через роутер, открываем настройку сети. В ваших настройках сети в ТВ выбираем ручной режим и изменяем только данные в поле DNS - на локальный IP адрес того компьютера, где запущен этот комплект приложений (как найти адрес IP компа описан выше в пункте 2).
Если что-то в ТВ не сработает с настройками сети, то попробуйте на ПК отключить на время брандмауер или то, что препятствует соединению ТВ по сети через ПК и роутер, типа блокирует порт 80, например, Антивирус, Skype на ПК и все его процессы обязательно должны быть закрыты.

Примечание: Соединение и сам ТВ должны обязательно иметь доступ и к сети, должно быть полное соединение как при стандартных настройках. Если этого так и не случилось, то на ПК вводим в командной строке следующее значение " nslookup lgtvonline.lge.com 8.8.8.8" и смотрим результат выполнения.
Для дальнейшего решения проблемы необходимо в файле "C:\LgDTVUpDater\dns\AcrylicConfiguration.ini" в строке PrimaryServerAddress=8.8.8.8 значение 8.8.8.8 изменить на адрес DNS своего провайдера или на IP-адрес своего роутера, 
или испробовать другой вариант DNS-сервера DualServer через запуск start_new.bat.

7. Все готово, можно проверять обновление на ТВ, выбрав пункт в соответствующих Настройках ТВ по обновлению ПО и при сообщении о доступной нужной вами выбранной версии, запускаем обновление как обычно и без смены в ТВ страны обслуживания. Если на ТВ при онлайн обновлении выдало ошибку загрузки, то возможно данная версия ПО удалена с сервера LG, или по причине нестабильного интернета от провайдера через ваш роутер, проверьте все и повторите процедуру.
На ТВ во время процедуры отката должен быть запущен просмотр программы ТВ, чтобы телевизор случайно не отключился от сети из-за отсутствующего сигнала трансляции.

8. После обновления (отката) нужно вернуть в настройках ТВ прежний DNS адрес или применить автоматические настройки сети.

9. На ПК в окошке с запущенным Apache, крестиком вверху справа закрываем программу с окном.
На окне командной строки с запущенным DNS-сервером тоже крестиком завершаем и закрываем окно программы (там в окне уже будет много строк).
Все, процесс отката и работа этого комплекта приложений завершены.

Примечание: Все загруженные на ПК файлы ПО можно установить в ТВ и через USB флешку, как и файлы ПО загруженные с сайта LG, если текущая версия ПО в ТВ меньше номером, чем номер версии устанавливаемого файла ПО.

Описание работы этого комплекта приложений по откату ПО:
-----------------------------------------------------------
Папка "htdocs" - тут расположены рабочие файлы, в том числе и скрипт обработки отката и эта папка равносильна пути сервера обновления по обработке скрипта LG (http://snu.lge.com).
"CheckSWManualUpdate.laf" - страничка-скрипт, который участвует в процессе обработки запроса от ТВ и получения телевизором ответа по всем данным об обновлении ПО (вместо скрипта от LG).
Телевизор отправляет данные о себе. Мы их принимаем обработкой скрипта, декодируем. Декодированный запрос пишется в файл "in_dump.txt" - это содержимое реального раскодированного запроса от вашей модели ТВ. Из запроса телевизора мы получаем данные "MODEL_NM", об их наименованиях изложено выше в 3 пункте данной инструкции и это и есть названия файлов реальных ответов на запрос для ТВ. После этого в рабочей директории "htdocs" пытаемся открыть и прочитать содержимое этого файла ответа в зависимости от модели ТВ и полученного от него запроса, и если такой имеется, то кодируем то, что в нем и отправляем телевизору. Если модель телевизора (файл ответа) не опознана скриптом, возвращается ответ - типа нет обновлений, берется из файла "EMPTY", находящегося в папке "htdocs", и на ТВ будет выведено сообщение об отсутствии новой версии ПО. Загрузка самого файла ПО на ТВ будет идти с сервера обновления LG с адреса http://su.lge.com при онлайн методе отката, ссылка на файл ПО находится в этом же ответе в конце файла ответа, который будет отправлен на ТВ после обработки запроса, или с папки "htdocs" при локальном методе отката. Файл скрипта "GlobalSWDownloadCdn.laf" необходим, если выполняется локальный метод отката с файлом ответа из папки "zagotovki\online" для автоматической загрузки файла ПО из папки htdocs. Устанавливать через этот метод можно версии ПО назад и вперед, с понижением и повышением номера, и даже на подобную версию, что установлена в ТВ, и без надобности смены в ТВ страны обслуживания.
